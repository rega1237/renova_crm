<div class="bg-white p-6 rounded-xl shadow-md">
  <div class="flex items-center justify-between mb-4">
    <h1 class="font-poppins text-2xl font-bold text-negro-onix">Detalle de llamada</h1>
    <div>
      <%= link_to "Volver", calls_path, class: "text-rojo-carmesi font-poppins hover:underline" %>
    </div>
  </div>
  <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Twilio Call SID</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.twilio_call_id %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Usuario</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.user&.name %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Cliente</dt>
      <dd class="font-montserrat text-base text-negro-onix">
        <% if @call.client.present? %>
          <%= link_to(@call.client.name,
                      client_path(@call.client),
                      data: { turbo_frame: "slideover" },
                      class: "text-rojo-carmesi hover:underline") %>
        <% else %>
          -
        <% end %>
      </dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Fecha</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.call_date.strftime('%d/%m/%Y') %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Hora</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.call_time.strftime('%H:%M:%S') %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Duración (s)</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.duration || '-' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Dirección</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.direction || '-' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Estado</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @call.status || '-' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Grabación</dt>
      <dd class="font-montserrat text-base text-negro-onix">
        <% if @call.recording_sid.present? && @call.recording_status == 'completed' %>
          <audio controls class="w-full">
            <source src="<%= recording_call_path(@call) %>" type="audio/mpeg" />
          </audio>
        <% else %>
          -
        <% end %>
      </dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Atendida</dt>
      <% atendida = @call.respond_to?(:effective_answered?) ? @call.effective_answered? : (@call.duration.to_i > 0) %>
      <dd class="font-montserrat text-base <%= atendida ? 'text-green-700' : 'text-red-700' %>"><%= atendida ? 'Sí' : 'No' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Creado</dt>
      <dd class="font-montserrat text-base text-gray-700"><%= @call.created_at.in_time_zone.strftime('%d/%m/%Y %H:%M:%S') %></dd>
    </div>
  </dl>
</div>
<%= turbo_frame_tag "slideover" %>