<div class="bg-white p-6 rounded-xl shadow-md">
  <div class="flex items-center justify-between mb-4">
    <h1 class="font-poppins text-2xl font-bold text-negro-onix">Detalle de mensaje de texto</h1>
    <div>
      <%= link_to "Volver", text_messages_path, class: "text-rojo-carmesi font-poppins hover:underline" %>
    </div>
  </div>
  <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Twilio SMS SID</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.twilio_sms_id %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Usuario</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.user&.name || @text_message.user&.email %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Cliente</dt>
      <dd class="font-montserrat text-base text-negro-onix">
        <% if @text_message.client.present? %>
          <%= link_to(@text_message.client.name,
                      client_path(@text_message.client),
                      data: { turbo_frame: "slideover" },
                      class: "text-rojo-carmesi hover:underline") %>
        <% else %>
          -
        <% end %>
      </dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Fecha</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.sms_date.strftime('%d/%m/%Y') %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Hora</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.sms_time.strftime('%H:%M:%S') %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">De</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.from_phone || '-' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Para</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.to_phone || '-' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Dirección</dt>
      <dd class="font-montserrat text-base text-negro-onix">
        <% if @text_message.direction == 'inbound' %>
          <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800">Entrante</span>
        <% elsif @text_message.direction == 'outbound' %>
          <span class="inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800">Saliente</span>
        <% else %>
          <%= @text_message.direction || '-' %>
        <% end %>
      </dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Estado</dt>
      <dd class="font-montserrat text-base text-negro-onix"><%= @text_message.status&.humanize || '-' %></dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Origen</dt>
      <dd class="font-montserrat text-base text-negro-onix">
        <% if @text_message.client_id.present? %>
          <span class="inline-flex items-center gap-1">
            <span class="px-2 py-1 text-xs rounded bg-blue-100 text-blue-700 font-poppins">Cliente</span>
            <%= @text_message.client.name %>
          </span>
        <% elsif @text_message.contact_list_id.present? %>
          <span class="inline-flex items-center gap-1">
            <span class="px-2 py-1 text-xs rounded bg-purple-100 text-purple-700 font-poppins">Contacto</span>
            <%= @text_message.contact_list.name %>
          </span>
        <% else %>
          <span class="inline-flex items-center gap-1">
            <span class="px-2 py-1 text-xs rounded bg-gray-100 text-gray-700 font-poppins">Desconocido</span>
          </span>
        <% end %>
      </dd>
    </div>
    <div>
      <dt class="font-poppins text-sm font-medium text-gray-500">Creado</dt>
      <dd class="font-montserrat text-base text-gray-700"><%= @text_message.created_at.in_time_zone.strftime('%d/%m/%Y %H:%M:%S') %></dd>
    </div>
    <div class="md:col-span-2">
      <dt class="font-poppins text-sm font-medium text-gray-500">Mensaje</dt>
      <dd class="font-montserrat text-base text-negro-onix mt-2 p-4 bg-gray-50 rounded-lg border border-gray-200">
        <%= simple_format(@text_message.message_body) %>
      </dd>
    </div>
  </dl>
  
  <!-- Acciones relacionadas -->
  <% if @text_message.client.present? %>
    <div class="mt-6 pt-6 border-t border-gray-200">
      <h3 class="font-poppins text-lg font-semibold text-negro-onix mb-4">Acciones del Cliente</h3>
      <div class="flex gap-3">
        <%= link_to "Ver Cliente", 
                    client_path(@text_message.client), 
                    class: "bg-rojo-carmesi text-white font-poppins font-medium py-2 px-4 rounded-md hover:opacity-90 transition-opacity text-sm" %>
        <%= link_to "Ver Conversación", 
                    sms_messages_client_path(@text_message.client), 
                    class: "bg-gray-600 text-white font-poppins font-medium py-2 px-4 rounded-md hover:opacity-90 transition-opacity text-sm" %>
      </div>
    </div>
  <% end %>
</div>
<%= turbo_frame_tag "slideover" %>